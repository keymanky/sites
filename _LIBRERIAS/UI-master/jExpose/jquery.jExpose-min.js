(function(jQuery){var initCSS={position:"absolute",visibility:"hidden",opacity:0};var settings={};var justClosed=false;var expose_corners=null,expose_margins=null;var cornerBoundaries=[],marginBoundaries=[];function expose_setElementsDimensions(b,e1,e2,e3,e4){e1.css({left:b[0][0],top:b[0][1],width:b[0][2],height:b[0][3]});e2.css({left:b[1][0],top:b[1][1],width:b[1][2],height:b[1][3]});e3.css({left:b[2][0],top:b[2][1],width:b[2][2],height:b[2][3]});e4.css({left:b[3][0],top:b[3][1],width:b[3][2],height:b[3][3]});}
function isInside(x,y,boundary){for(var i=0;i<4;i++){if(x>=boundary[i][0]&&x<=boundary[i][0]+boundary[i][2]&&y>=boundary[i][1]&&y<=boundary[i][1]+boundary[i][3]){return true;}}
return false;}
function expose_resizeCorners(cTL,cTR,cBR,cBL,pL,pT,wW,wH){var b=[];b[0]=[pL,pT,15,15];b[1]=[wW-15+pL,pT,15,15];b[2]=[wW-15+pL,wH-15+pT,15,15];b[3]=[pL,wH-15+pT,15,15];expose_setElementsDimensions(b,cTL,cTR,cBR,cBL);return b;}
function expose_resizeMargins(mT,mR,mB,mL,pL,pT,wW,wH){var b=[];b[0]=[15+70+pL,pT,wW-30-140,15];b[1]=[wW-15+pL,15+70+pT,15,wH-30-140];b[2]=[15+70+pL,wH-15+pT,wW-30-140,15];b[3]=[pL,15+70+pT,15,wH-30-140];expose_setElementsDimensions(b,mT,mR,mB,mL);return b;}
function expose_resizeLayer(layer,pL,pT,wW,wH){layer.css({top:pT,left:pL,width:wW,height:wH});}
function expose_createCorners(pL,pT,wW,wH,body){var cTL=jQuery("<div id='exposeTL'></div>"),cTR=jQuery("<div id='exposeTR'></div>"),cBL=jQuery("<div id='exposeBL'></div>"),cBR=jQuery("<div id='exposeBR'></div>");cTL.css(initCSS);cTR.css(initCSS);cBL.css(initCSS);cBR.css(initCSS);body.append(cTL);body.append(cTR);body.append(cBL);body.append(cBR);return expose_resizeCorners(cTL,cTR,cBR,cBL,pL,pT,wW,wH);}
function expose_createMargins(pL,pT,wW,wH,body){var mT=jQuery("<div id='exposeT'></div>"),mL=jQuery("<div id='exposeL'></div>"),mR=jQuery("<div id='exposeR'></div>"),mB=jQuery("<div id='exposeB'></div>");mL.css(initCSS);mR.css(initCSS);mT.css(initCSS);mB.css(initCSS);body.append(mL);body.append(mR);body.append(mT);body.append(mB);return expose_resizeMargins(mT,mR,mB,mL,pL,pT,wW,wH);}
function expose_createLayer(pL,pT,wW,wH,body){var layer=jQuery("<div id='exposeLayer'></div>");layer.css(initCSS);expose_resizeLayer(layer,pL,pT,wW,wH);body.append(layer);}
function expose_started(){return jQuery("#exposeLayer").length;}
jQuery.exposeData={defaults:{showCorners:true,showMargins:true,onlyCorners:false,resizeWithWindow:true,showLayer:true,layerOpacity:0.5,onCornerTopLeft:null,onCornerTopRight:null,onCornerBottomLeft:null,onCornerBottomRight:null,onMarginTop:null,onMarginLeft:null,onMarginRight:null,onMarginBottom:null,onLayerExit:null}};jQuery.expose=function(options){var layer;function callHandler(handler){if(handler!==null){handler();}}
function callHandlerById(triggerID){switch(triggerID){case"exposeTL":callHandler(settings.onCornerTopLeft);break;case"exposeTR":callHandler(settings.onCornerTopRight);break;case"exposeBR":callHandler(settings.onCornerBottomRight);break;case"exposeBL":callHandler(settings.onCornerBottomLeft);break;case"exposeT":callHandler(settings.onMarginTop);break;case"exposeR":callHandler(settings.onMarginRight);break;case"exposeB":callHandler(settings.onMarginBottom);break;case"exposeL":callHandler(settings.onMarginLeft);break;}}
function hoverIn(){var triggerID=jQuery(this).attr("id");if(!justClosed){if(settings.showLayer){layer.css("visibility","visible").animate({opacity:settings.layerOpacity},300,function(){callHandlerById(triggerID);});}else{callHandlerById(triggerID);}}}
function hoverOut(){justClosed=false;}
function hideLayer(layer){layer.animate({opacity:0},150,function(){jQuery(this).css("visibility","hidden");});}
if(expose_started()){return;}
settings=jQuery.extend({},jQuery.exposeData.defaults,options);var $window=jQuery(window),$body=jQuery("body"),wW=$window.width(),wH=$window.height();cornerBoundaries=expose_createCorners(0,0,wW,wH,$body);marginBoundaries=expose_createMargins(0,0,wW,wH,$body);expose_createLayer(0,0,wW,wH,$body);var cTL=jQuery("#exposeTL"),cTR=jQuery("#exposeTR"),cBL=jQuery("#exposeBL"),cBR=jQuery("#exposeBR"),mT=jQuery("#exposeT"),mR=jQuery("#exposeR"),mB=jQuery("#exposeB"),mL=jQuery("#exposeL");layer=jQuery("#exposeLayer");$window.resize(function(){if(settings.resizeWithWindow){var _width=jQuery(this).width(),_height=jQuery(this).height();cornerBoundaries=expose_resizeCorners(cTL,cTR,cBR,cBL,0,0,_width,_height);marginBoundaries=expose_resizeMargins(mT,mR,mB,mL,0,0,_width,_height);expose_resizeLayer(layer,0,0,_width,_height);}});$window.scroll(function(){var _width=jQuery(this).width(),_height=jQuery(this).height(),_left=jQuery(this).scrollLeft(),_top=jQuery(this).scrollTop();cornerBoundaries=expose_resizeCorners(cTL,cTR,cBR,cBL,_left,_top,_width,_height);marginBoundaries=expose_resizeMargins(mT,mR,mB,mL,_left,_top,_width,_height);expose_resizeLayer(layer,_left,_top,_width,_height);});layer.click(function(evt){justClosed=isInside(evt.pageX,evt.pageY,cornerBoundaries)||isInside(evt.pageX,evt.pageY,marginBoundaries);callHandler(settings.onLayerExit);hideLayer(jQuery(this));});expose_corners=jQuery("#exposeTL, #exposeTR, #exposeBR, #exposeBL");expose_margins=jQuery("#exposeT, #exposeR, #exposeB, #exposeL");expose_corners.hover(hoverIn,hoverOut);expose_margins.hover(hoverIn,hoverOut);};jQuery.expose.enable=function(){if(!expose_started()){return;}
expose_corners.css({visibility:"visible",opacity:0});expose_margins.css({visibility:(settings.onlyCorners?"hidden":"visible"),opacity:0});jQuery.expose.showControls();};jQuery.expose.disable=function(){if(!expose_started()){return;}
expose_corners.css("visibility","hidden");expose_margins.css("visibility","hidden");};jQuery.expose.hideControls=function(){if(!expose_started()){return;}
expose_corners.animate({opacity:0},150);expose_margins.animate({opacity:0},150);};jQuery.expose.showControls=function(){if(!expose_started()){return;}
expose_corners.animate({opacity:(settings.showCorners?1:0)},150);expose_margins.animate({opacity:(settings.showMargins?1:0)},150);};jQuery.expose.setShowCorners=function(b){if(!expose_started()){return;}
settings.showCorners=b;expose_corners.animate({opacity:(b?1:0)},150);};jQuery.expose.setShowMargins=function(b){if(!expose_started()){return;}
settings.showMargins=b;expose_margins.animate({opacity:(b?1:0)},150);};jQuery.expose.setOnlyCorners=function(b){if(!expose_started()){return;}
settings.onlyCorners=b;expose_margins.css("visibility",(b?"hidden":"visible"));};})(jQuery);