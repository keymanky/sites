(function (a) {
	function h(c, d, f, g, h) {
		var i;
		c.find(".image-samples ul li a").click(function (e) {
			i = b(c, a(this), e, d, f, h)
		});
		c.find(".close").click(function (a) {
			e(c, a, d, f, i, h)
		}).hover(function () {
			a(this).find("span").animate({
				bottom: "0px"
			}, 200)
		}, function () {
			a(this).find("span").animate({
				bottom: "-" + a(this).height() + "px"
			}, 200)
		});
		c.find(".prev-inner,.next-inner").hide();
		c.find(".project-detail-nav").css("opacity", "0.0");
		c.find(".image-samples").cycle({
			fx: "scrollHorz",
			timeout: 0,
			prev: c.find(".prev-outer"),
			next: c.find(".next-outer"),
			easing: g,
			pager: c.find(".project-overview-nav .nav")
		})
	}
	function g(a) {
		a.addClass("loading");
		a.find(".image-loader div").remove()
	}
	function f(b, c, e, f, h) {
		a(f.selectedProject).parents("ul:first").show();
		b.find(".project-detail-nav .nav a").remove();
		b.find(".prev,.next").show();
		b.find(".prev-inner,.next-inner").hide();
		d(b.find(".project-overview-nav"), 500, 1, "-=30", 500);
		var i = b.find(".image-samples ul").outerWidth() / 2;
		var j = b.find(".image-samples ul").outerHeight() / 2;
		b.find(f.first).animate({
			left: "0",
			top: 0
		}, {
			duration: c,
			easing: e
		});
		b.find(f.second).delay(h / 3).animate({
			right: "+=" + i,
			top: 0
		}, {
			duration: c,
			easing: e
		});
		b.find(f.third).delay(2 * h / 3).animate({
			left: "0",
			bottom: 0
		}, {
			duration: c,
			easing: e
		});
		b.find(f.fourth).delay(h).animate({
			right: "+=" + i,
			bottom: 0
		}, {
			duration: c,
			easing: e,
			complete: function () {
				g(b)
			}
		})
	}
	function e(a, b, c, e, g, h) {
		b.preventDefault();
		d(a.find(".project-detail-nav"), 0, 0, "+=30", 500);
		a.find(".image-loader div").fadeOut("slow", function () {
			f(a, c, e, g, h)
		})
	}
	function d(a, b, c, d, e) {
		a.delay(b).animate({
			opacity: c,
			top: d
		}, {
			duration: e,
			easing: "easeOutExpo"
		})
	}
	function c(b, c) {
		c.parents("ul:first").hide();
		var e = c.attr("href").replace(/#/g, "");
		b.find(".image-loader").hide().html('<div class="project-content">' + a("#project-" + e).html() + "</div>").preload(function () {
			b.removeClass("loading");
			var f = c.next().text();
			b.find(".project-detail-nav h3").text(f);
			var g = a("#project-" + e).attr("title");
			b.find(".project-detail-nav p").text(g);
			var h = c.attr("rel");
			b.find(".close img").attr("src", h);
			b.find(".image-loader div.project-content").cycle({
				fx: "fade",
				timeout: 0,
				prev: b.find(".prev-inner"),
				next: b.find(".next-inner"),
				pager: b.find(".project-detail-nav .nav"),
				before: function () {
					b.find(".image-loader").fadeIn(1e3)
				}
			});
			d(b.find(".project-detail-nav"), 0, 1, "-=30", 500)
		})
	}
	function b(a, b, e, f, g, h) {
		e.preventDefault();
		a.find(".prev,.next").hide();
		a.find(".prev-inner,.next-inner").show();
		d(a.find(".project-overview-nav"), 1, 0, "+=30", 500);
		var i = "." + b.parents("ul:first").attr("class") + " .first";
		var j = "." + b.parents("ul:first").attr("class") + " .second";
		var k = "." + b.parents("ul:first").attr("class") + " .third";
		var l = "." + b.parents("ul:first").attr("class") + " .fourth";
		var m = a.find(".image-samples ul").outerWidth() / 2;
		var n = a.find(".image-samples ul").outerHeight() / 2;
		a.find(i).animate({
			left: "-" + m + "px",
			top: "-" + n + "px"
		}, {
			duration: f,
			easing: g
		});
		a.find(j).delay(h / 3).animate({
			right: "-" + m + "px",
			top: "-" + n + "px"
		}, {
			duration: f,
			easing: g
		});
		a.find(k).delay(2 * h / 3).animate({
			left: "-" + m + "px",
			bottom: "-" + n + "px"
		}, {
			duration: f,
			easing: g
		});
		a.find(l).delay(h).animate({
			right: "-" + m + "px",
			bottom: "-" + n + "px"
		}, {
			duration: f,
			easing: g,
			complete: function () {
				c(a, b)
			}
		});
		return {
			selectedProject: b,
			first: i,
			second: j,
			third: k,
			fourth: l
		}
	}
	a.fn.preload = function (b) {
		return this.each(function () {
			var c = a(this);
			var d = c.find("img").length;
			c.find("img").each(function (c) {
				var e = a(this),
					f = e.attr("rel");
				e.load(function () {
					if (c + 1 == d) {
						b()
					}
				}).attr("src", f)
			})
		})
	};
	a.fn.gridSlider = function (b) {
		var c = {
			animEasing: "easeInOutQuint",
			slideAnimEasing: "easeInOutQuint",
			animSpeed: 500,
			slideAnimDelay: 300
		};
		var d = a.extend(c, b);
		this.each(function () {
			var b = a(this).find(".gs-container");
			h(b, d.animSpeed, d.animEasing, d.slideAnimEasing, d.slideAnimDelay)
		})
	};
})(jQuery)