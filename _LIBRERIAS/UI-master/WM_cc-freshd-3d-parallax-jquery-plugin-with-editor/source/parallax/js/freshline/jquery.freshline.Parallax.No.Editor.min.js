(function(a,b){function j(c,d){var e=0;c.find("div").each(function(b){var d=a(this);if(d.hasClass("before"))d.appendTo(c.find("#before").parent());if(d.hasClass("after"))d.appendTo(c.find("#after").parent())});c.find("div").each(function(c){var f=a(this);if(f.data("_top")==b)f.data("_top",f.position().top);if(f.data("_left")==b)f.data("_left",f.position().left);if(f.data("_op")==b)f.data("_op",f.css("opacity"));if(f.hasClass("slideup")){f.animate({top:f.data("_top")+20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slideright")){f.animate({left:f.data("_left")-20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slidedown")){f.animate({top:f.data("_top")-20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slideleft")){f.animate({left:f.data("_left")+20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px"},{duration:300,queue:true});e++}if(f.hasClass("fadeup")){f.animate({top:f.data("_top")+20+"px",opacity:0},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("faderight")){f.animate({left:f.data("_left")-20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fadedown")){f.animate({top:f.data("_top")-20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fadeleft")){f.animate({left:f.data("_left")+20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fade")){f.animate({opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({opacity:f.data("_op")},{duration:300,queue:true});e++}})}function i(c,d,e,f){var g=c/a(window).width();var h=-1*(d/a(window).height());if(g>1)g=1;if(g<-1)g=-1;if(h>1)h=1;if(h<-1)h=-1;var i=f.data("startx");var j=f.data("starty");var k=Math.abs(f.data("endx")-i);var l=f.data("endy")-j;var m=f.data("endskew")-f.data("startskew");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(f.data("endx_ie8")!=b){i=f.data("startx_ie8");k=Math.abs(f.data("endx_ie8")-i)}if(f.data("endy_ie8")!=b){j=f.data("starty_ie8");l=Math.abs(f.data("endy_ie8")-j)}m=0}var n=0;var o=0;if(f.data("zoomxoffset")!=b)n=f.data("zoomxoffset");if(f.data("zoomxendoffset")!=b)o=f.data("zoomxendoffset");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(f.data("zoomxoffset_ie8")!=b)n=f.data("zoomxoffset_ie8");if(f.data("zoomxendoffset_ie8")!=b)o=f.data("zoomxendoffset_ie8")}var p=e.data("zoommax")-e.data("zoommin");p=p*h/100;p=e.data("zoommin")/100+p;var q=f.data("oldWidth")*p;var r=f.data("oldHeight")*p;var s=k*g;var t=l*h;var u=m*g;var v=n*h;var w=Math.abs(n-o);v=v-w*g*h;var x=0;var y=0;x=(q-f.data("oldWidth"))/2;y=(r-f.data("oldHeight"))/2;var z=v+i-s-x;var A=j+t-y;f.find("img").css({width:q+"px",height:r+"px"});f.css({left:z+"px",top:A+"px"});f.find("#selectbox").css({width:q+"px",height:r+"px",left:"0px",top:"0px"});if(f.data("endskew")!=b){f.css({transform:"skew("+(f.data("startskew")+u)+"deg)","-o-transform":"skew("+(f.data("startskew")+u)+"deg)","ms-transform":"skew("+(f.data("startskew")+u)+"deg)","-ms-transform":"skew("+(f.data("startskew")+u)+"deg)","-moz-transform":"skew("+(f.data("startskew")+u)+"deg)","-webkit-transform":"skew("+(f.data("startskew")+u)+"deg)"})}}function h(b,c){if(c.editor=="on"){b.find("#controllgrid").mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);if(b.data("rabbit")=="on"){b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})}})}else{if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){b.mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})})}else{a(window).mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})})}}}function g(b,d){b.css({opacity:"0.0",display:"block"});b.find("div").css({opacity:"1.0",display:"block"});b.animate({opacity:"1.0"},{duration:1e3}).delay(1e3);b.children().each(function(){var c=a(this);i(100,100,b,c)});if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){b.addClass("noFilterClass");b.find("div").addClass("noFilterClass")}else{j(b,500)}b.find("#parallax-main-loader").each(function(){var c=a(this);c.animate({opacity:"0.0"},{duration:1e3,complete:function(){c.remove();h(b,d)}})});b.data("mouseX",0);b.data("mouseY",0);b.data("xset",10);b.data("yset",10);b.data("automatic",d.automatic);if(d.automatic>0&&d.editor!="on"){setInterval(function(){if(b.data("countdown")<d.automatic)b.data("countdown",b.data("countdown")+100);if(b.data("countdown")>=d.automatic){b.data("mouseX",b.data("mouseX")+b.data("xset"));b.data("mouseY",b.data("mouseY")+b.data("yset"));if(b.data("mouseX")>=parseInt(b.css("width"),0))b.data("xset",-20);if(b.data("mouseY")>=parseInt(b.css("height")))b.data("yset",-20);if(b.data("mouseX")<=0)b.data("xset",20);if(b.data("mouseY")<=0)b.data("yset",20);c(b)}},50)}}function f(b){b.children().each(function(){var b=a(this);b.data("oldLeft",b.position().left);b.data("oldTop",b.position().top);b.data("oldWidth",b.find("img:first").width());b.data("oldHeight",b.find("img:first").height())});b.find(".p_button").each(function(){var b=a(this);b.data("button_normal",b.find("img").attr("src"));b.data("button_hover",b.find("img").attr("alt"));b.hover(function(){var b=a(this);var c=b.find("img");c.attr("src",b.data("button_hover"))},function(){var b=a(this);var c=b.find("img");c.attr("src",b.data("button_normal"))})})}function e(b,c){var d=b.data("ba_images");var f=b.data("ba_imagesLoaded");var h=new Image;a(h).css("display","none");a(h).attr("src",d[f]);if(h.complete||h.readyState===4){f++;if(f==d.length){g(b,c)}else{b.data("ba_imagesLoaded",f);e(b,c)}}else{a(h).load(function(){f++;if(f==d.length){g(b,c)}else{b.data("ba_imagesLoaded",f);e(b,c)}})}}function d(b){var c=new Array;var d=0;b.find("img").each(function(b){var e=a(this);c[d]=e.attr("src");d++});b.data("ba_images",c)}function c(b){b.children().each(function(){var c=a(this);i(b.data("mouseX"),b.data("mouseY"),b,c)})}a.fn.extend({fhparallax:function(b){var c={editor:"off",path:"parallax/js/ZeroClipboard.swf",automatic:0,mobile_auto_start:"yes"};b=a.extend({},a.fn.fhparallax.defaults,b);return this.each(function(){var c=a(this);var g=b;if(g.editor=="on")c.data("old_html",c.html());c.data("ba_imagesLoaded",0);c.data("path",g.path);c.find("div").css({opacity:"0.0",display:"block"});f(c);c.append('<div id="parallax-main-loader" class="parallax-main-loader"></div>');c.data("countdown",0);c.data("auto_direction",15);c.data("auto_zoom",15);c.data("lastmouseX",100);c.data("lastmouseY",300);if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){if(g.mobile_auto_start=="yes")g.automatic=1}d(c);e(c,g);c.data("rabbit","on");if(g.editor=="on"){c.appendTo(a("body"));c.css({"z-index":"88999"});createEditor(c,g)}})}});})(jQuery)