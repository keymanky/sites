(function(a,b){function q(a){var c=a.find("#selectbox");c.stop(true,true);c.css({opacity:"0.0"});c.animate({opacity:"0.2"},{duration:3e3,queue:false});var d=c.parent();if(d.data("startx")==b)d=d.parent();return d}function p(b,d){d.parent().find(".controllgrid_steps").each(function(){var b=a(this);b.css({"background-position":"top"});b.removeClass("stepselectednow")});d.css({"background-position":"bottom"});d.addClass("stepselectednow");var e=b.find("#controllgrid_minipanel_info");e.html("INFO");var f=b.find(".controllgrid_skew_start");var g=b.find(".controllgrid_skew_end");var h=b.find(".controllgrid_skew_plus");var i=b.find(".controllgrid_skew_minus");var j=b.find(".skew_text");var k=b.find(".controllgrid_skew_value");var l=b.find(".controllgrid_minipanel_text");f.css({display:"block"});g.css({display:"block"});h.css({display:"block"});i.css({display:"block"});j.css({display:"block"});k.css({display:"block"});l.css({"margin-top":"50px"});l.html("<b>Start X/Y</b> Position:");if(d.data("ad")=="1"){j.html("<b>Start</b> Skew");f.css({opacity:"1.0"});g.css({opacity:"0.0"});b.data("mouseX",0);b.data("mouseY",0);var m=b.find("#selectbox");var n=m.parent();var o=b.find(".controllgrid_skew_value");o.html(n.data("startskew"));c(b)}else{if(d.data("ad")=="2"){j.html("<b>End</b> Skew");l.html("<b>End X/Y</b> Position:");f.css({opacity:"0.0"});g.css({opacity:"1.0"});b.data("mouseX",3e3);b.data("mouseY",0);var m=b.find("#selectbox");var n=m.parent();var o=b.find(".controllgrid_skew_value");o.html(n.data("endskew"));c(b)}else{f.css({display:"none"});g.css({display:"none"});h.css({display:"none"});i.css({display:"none"});j.css({display:"none"});k.css({display:"none"});l.css({"margin-top":"-35px"});if(d.data("ad")=="3"){l.html("<b>End Y</b> Position &<br> <b>Zoom Dependend</b> Horizontal <b>Offset</b>:");f.css({opacity:"0.0"});g.css({opacity:"0.0"});b.data("mouseX",0);b.data("mouseY",3e3);c(b)}else{if(d.data("ad")=="4"){l.html("<b>End Y</b> Position &<br> <b>Zoom Dependend</b> Horizontal <b>Offset</b>:");f.css({opacity:"0.0"});g.css({opacity:"0.0"});b.data("mouseX",3e3);b.data("mouseY",3e3);c(b)}}}}}function o(a,b,d,e,f){var g=parseInt(e.find(".selectedgap").data("st"),0);if(d=="-1"){a.data(b,a.data(b)-g)}else{a.data(b,a.data(b)+g)}f.html(a.data(b));c(e)}function n(a,b,c,d){d=d.replace("data-"+a+'="'+b.data(a)+'"',"data-"+a+'="'+c.data(a)+'"');return d}function m(b){b.css({"z-index":"5000"});var c=a('<div id="lboxoverlay" class="controllgrid_lightbox_overlay"></div>');c.css({width:a(window).width()+"px",height:a(window).height()+150+"px",opacity:"0.7"});a("body").append(c);var d="file"==String(a(location).attr("href")).substring(0,4);if(!d)var e="Click icon to copy to clipboard or copy manually";else var e="Copy HTML manually to clipboard (Offline Modus)";var f=a('<div id="controllgird_lbox" class="controllgrid_lightbox_holder"><div id="cggreybox" class="greybox"><div class="controllgrid_lightbox_holder_icon"></div><div class="controllgrid_lightbox_header">'+e+"</div></div></div>");f.css({top:Math.round((a(window).height()-f.outerHeight())/2)+"px",left:Math.round((a(window).width()-f.outerWidth())/2)+"px","margin-top":0,"margin-left":0});var g=a('<div id="controllgrid_lightbox_holder_closebutton" class="controllgrid_lightbox_holder_closebutton"></div>');a("body").append(f);f.append(g);f.delay(1).animate({top:l()+Math.round((a(window).height()-f.outerHeight())/2)+"px",left:Math.round((a(window).width()-f.outerWidth())/2)+"px"},{duration:10,queue:true});g.click(function(){a("body").unbind();a("body").find("#lboxoverlay").remove();a("body").find("#controllgird_lbox").remove();b.css({"z-index":"9000"})});var h=a('<div id="old_parallax">'+b.data("old_html")+"</div>");var i="";h.children().each(function(c){var d=a(this);var e=d.attr("id");var f=b.find("#"+e);var g=d.clone().wrap("<div></div>").parent().html();i=i+"<!--\n##############################\n     "+e+"  Settings  \n##############################\n-->\n\n";g=n("startx",d,f,g);g=n("starty",d,f,g);g=n("endx",d,f,g);g=n("endy",d,f,g);g=n("startskew",d,f,g);g=n("endskew",d,f,g);g=n("startx_ie8",d,f,g);g=n("starty_ie8",d,f,g);g=n("endx_ie8",d,f,g);g=n("endy_ie8",d,f,g);g=n("zoomxoffset",d,f,g);g=n("zoomxoffset_ie8",d,f,g);g=n("zoomxendoffset",d,f,g);g=n("zoomxendoffset_ie8",d,f,g);i=i+"        "+g+"\n\n"});f.append('<div id="new_htmlsource" style="overflow:hidden;width:800px;height:460px;margin-left:0px;margin-top:20px"></div>');f.find("#new_htmlsource").html('<textarea id="result_html" style="padding:10px;margin-top:-3px;width:785px;height:466px;">'+i+"</textarea>");f.find("#result_html").select();if(!d){b.data("result",f.find("#result_html").val());f.find(".controllgrid_lightbox_holder_icon").zclip({path:b.data("path"),copy:b.data("result")})}a(window).bind("resize scroll",function(){var b=a(this);var c=a("body").find("#lboxoverlay");var d=a("body").find("#controllgird_lbox");c.css({width:b.width()+"px",height:b.height()+150+"px",top:l()});d.stop();d.animate({top:l()+Math.round((a(window).height()-d.outerHeight())/2)+"px",left:Math.round((a(window).width()-d.outerWidth())/2)+"px"},{duration:300,queue:false})})}function l(){var a;if(self.pageYOffset){a=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else if(document.body){a=document.body.scrollTop}return a}function k(b,c){b.css({position:"absolute",top:"130px",left:"265px"});c.width=parseInt(b.css("width"),0);c.height=parseInt(b.css("height"),0);var d=80+c.width;var e=80+c.height;var f=e+80;if(f<1e3)f=1e3;b.prepend('<div class="editor_background_parallax" style="width:2400px;height:'+f+'px"></div>');var g=a('<div style="width:'+d+"px;height:"+e+'px;top:-60px;left:-60px" id="controllgrid" class="controllgrid"></div>');b.append(g);var h=a('<div class="controllgrid_pause" id="controllgrid_pause" ></div>');g.append(h);var i=a('<div class="controllgrid_openclose" title="Hide/Unhide the Gird"></div>');g.append(i);i.data("on",1);i.click(function(){var c=a(this);if(c.data("on")=="1"){b.find("#controllgrid").css({"background-position":"0px -900px"});c.css({"background-position":"bottom"});c.data("on",2)}else{b.find("#controllgrid").css({"background-position":"0px 0px"});c.data("on",1);c.css({"background-position":"top"})}});for(var j=0;j<e/20-1;j++){var k=a('<div style="position:absolute;left:2px;top:'+(-5+(j+1)*20)+'px;color:#55677b;font-size:8px">'+String(j*20-40)+"</div>");g.append(k)}for(var j=0;j<d/20-1;j++){var k=a('<div style="position:absolute;top:8px;left:'+(-5+(j+1)*20)+'px;color:#55677b;font-size:8px">'+String(j*20-40)+"</div>");g.append(k)}var l=a('<div id="panel" class="controllgrid_panel"></div>');var n=a('<div id="logo" class="controllgrid_panel_logo"></div>');b.append(l);l.append(n);var r=a('<div id="rabbit" title="Turn on/off Parallax Animation" class="controllgrid_rabbit"></div>');l.append(r);r.data("on","true");r.click(function(){var c=a(this);if(c.data("on")=="true"){c.css({"background-position":"bottom"});c.data("on","false");b.data("rabbit","off");b.find("#controllgrid_pause").css({display:"block"})}else{c.css({"background-position":"top"});c.data("on","true");b.data("rabbit","on");b.find("#controllgrid_pause").css({display:"none"})}});b.find("img").each(function(c){var d=a(this);if(d.parent().get(0).tagName=="A")d=d.parent();var e=a();var f=a('<div data-id="'+c+'" id="controllgird_layerholder_'+c+'"></div>');var g=a('<div class="controllgrid_swap_up" title="One layer Deeper"></div>');var h=a('<div class="controllgrid_swap_down" title="One layer Higher"></div>');var i=a('<div class="controllgrid_panel_item" title="Select -'+d.parent().attr("id")+'- Layer to Edit">'+d.parent().attr("id")+"</div>");var j=a('<div id="selecter" class="controllgrid_panel_filter" title="Hide / Unhide Layer"></div>');var k=a('<div class="controllgrid_panel_divider"></div>');f.append(g).append(h).append(i).append(j).append(k);g.click(function(){var c=a(this).parent();var d=a("<div>"+b.data("old_html")+"</div>");if(c.prev().attr("id")!="rabbit"){var e=c.find(".controllgrid_panel_item").data("parent");e.prev().insertAfter(e);c.prev().insertAfter(c);var f=d.find("#"+e.attr("id"));f.prev().insertAfter(f);b.data("old_html",d.html());d.remove()}});h.click(function(){var c=a(this).parent();var d=a("<div>"+b.data("old_html")+"</div>");if(c.next().attr("id")!="selectlayerinfo2"){var e=c.find(".controllgrid_panel_item").data("parent");e.insertAfter(e.next());c.insertAfter(c.next());var f=d.find("#"+e.attr("id"));f.insertAfter(f.next());b.data("old_html",d.html());d.remove()}});j.css({cursor:"pointer"});j.data("parent",d.parent());j.data("on","0");i.css({cursor:"pointer"});i.data("parent",d.parent());i.data("on","0");j.click(function(){var b=a(this);if(b.data("on")=="0"){b.data("on","1");b.data("parent").css({opacity:"0.1"});b.css({"background-position":"left top"})}else{b.data("on","0");b.data("parent").css({opacity:"1.0"});b.css({"background-position":"right top"})}});i.click(function(){var c=a(this);if(c.data("on")=="0"){b.find("#calibration_holder").css({display:"block"});b.find("#selectlayerinfo").css({display:"none"});b.find("#selectlayerinfo2").css({display:"none"});b.find("*").each(function(){var b=a(this);if(b.hasClass("controllgrid_panel_item_selected")){b.removeClass("controllgrid_panel_item_selected");b.data("on","0");var c=b.data("parent");c.find("#selectbox").remove()}});c.addClass("controllgrid_panel_item_selected");c.data("on","1");var d=c.data("parent");d.append('<div id="selectbox" style="position:absolute;left:0px;top:0px;background-color:#00f6e2;width:'+d.width()+"px;height:"+d.height()+'px;"></div>');d.find("#selectbox").css({opacity:"0.4"});p(b,b.find("#controllgrid_steps_1"))}else{c.removeClass("controllgrid_panel_item_selected");c.data("on","0");var d=c.data("parent");d.find("#selectbox").remove();b.find("#calibration_holder").css({display:"none"});b.find("#selectlayerinfo").css({display:"block"});b.find("#selectlayerinfo2").css({display:"block"})}});l.append(f)});l.append('<div class="controllgrid_select_one_layer_arrow" id="selectlayerinfo2"></div>');l.append('<div class="controllgrid_select_one_layer_text" id="selectlayerinfo">Select a Layer Above to Edit</div>');var s=a('<div id="controllgrid_show_html" class="controllgrid_show_html"><div class="controllgrid_show_html_icon"></div>Show HTML </div>');l.append(s);s.click(function(){m(b)});var t=a('<div class="calibration_holder" id="calibration_holder"></div>');t.css({display:"none"});l.append(t);t.append('<div class="controllgird_calib_text">Calibration Steps</div>');t.append('<div class="controllgrid_steps_numbers">1.</div>');t.append('<div class="controllgrid_steps_numbers">2.</div>');t.append('<div class="controllgrid_steps_numbers">3.</div>');t.append('<div class="controllgrid_steps_numbers">4.</div>');var u=a('<div id="controllgrid_steps_1" data-ad="1" title="Step 1. Start Calibration. Top Left -X/Y Start Positions and Skew Start" class="controllgrid_steps stepselectednow"></div>');var v=a('<div id="controllgrid_steps_2" data-ad="2" title="Step 2. Top Right -X End and Y Start Positions and Skew End" class="controllgrid_steps"></div>');var w=a('<div id="controllgrid_steps_3" data-ad="3" title="Step 3. Bottom Left -End Y Position and Start X-Offset" class="controllgrid_steps"></div>');var x=a('<div id="controllgrid_steps_4" data-ad="4" title="Last Step. Bottom Right -End Y Position and End X-Offset" class="controllgrid_steps"></div>');b.data("mouseX",0);b.data("mouseY",0);t.append(u);t.append('<div class="controllgrid_seperator"></div>');t.append(v);t.append('<div class="controllgrid_seperator"></div>');t.append(w);t.append('<div class="controllgrid_seperator"></div>');t.append(x);t.find(".controllgrid_steps").hover(function(){var b=a(this);if(!b.hasClass("stepselectednow"))b.css({"background-position":"center"})},function(){var b=a(this);if(b.hasClass("stepselectednow"))b.css({"background-position":"bottom"});else b.css({"background-position":"top"})});t.find(".controllgrid_steps").click(function(){p(b,a(this))});var y=a('<div class="step_separator_tabbackground"></div>');t.append(y);t.append('<div class="skew_text">Start Skew</div>');t.append('<div class="controllgrid_skew_start"></div>');var z=a('<div class="controllgrid_skew_minus" title="Decrease Skew"></div>');t.append(z);t.append('<div class="controllgrid_skew_value">0</div>');var A=a('<div class="controllgrid_skew_plus" title="Increase Skew"></div>');t.append(A);t.append('<div class="controllgrid_skew_end"></div>');z.hover(function(){var b=a(this);b.css({"background-position":"right bottom"})},function(){var b=a(this);b.css({"background-position":"right top"})});A.hover(function(){var b=a(this);b.css({"background-position":"left bottom"})},function(){var b=a(this);b.css({"background-position":"left top"})});z.click(function(){var a=q(b);var c=b.find(".controllgrid_skew_value");var d=b.find(".stepselectednow").data("ad");if(d=="1")o(a,"startskew",-1,b,c);else o(a,"endskew",-1,b,c)});A.click(function(){var a=q(b);var c=b.find(".controllgrid_skew_value");var d=b.find(".stepselectednow").data("ad");if(d=="1")o(a,"startskew",+1,b,c);else o(a,"endskew",+1,b,c)});t.append('<div class="controllgrid_minipanel_text">Start X/Y Position:</div>');var B=a('<div class="controllgrid_ministeps_holder"></div>');for(var C=0;C<5;C++){var D=100;if(C==1)D=10;else if(C==2)D=5;else if(C==3)D=2;else if(C==4)D=1;var E=a('<div class="controllgrid_ministeps" title="Gap to '+D+'" data-id="'+(4-C)+'" data-st="'+D+'"></div>');B.append(E);if(C==4){E.css({"background-position":"bottom"});E.addClass("selectedgap")}E.click(function(){var c=a(this);b.find(".controllgrid_ministeps_fake").css({"background-position":0-parseInt(c.data("id"),0)*9+"px 0px"});b.find(".controllgrid_ministeps").each(function(){var b=a(this);b.removeClass("selectedgap");b.css({"background-position":"top"})});c.addClass("selectedgap");c.css({"background-position":"bottom"});b.find("#cg_ministeps_info").html(c.data("st"))})}B.append('<div id="cg_ministeps_info" class="controllgrid_ministeps_text">1</div>');t.append(B);t.append('<div class="controllgrid_ministeps_fake" style="background-position:left"></div>');var F=a('<div id="controllgrid_minipanel" class="controllgrid_minipanel"></div>');var G=a('<div id="controllgrid_minipanel_up" class="controllgrid_minipanel_up" title="Move Up"></div>');var H=a('<div id="controllgrid_minipanel_down" class="controllgrid_minipanel_down" title="Move Down"></div>');var I=a('<div id="controllgrid_minipanel_left" class="controllgrid_minipanel_left" title="Move Left"></div>');var J=a('<div id="controllgrid_minipanel_right" class="controllgrid_minipanel_right" title="Move Right"></div>');var K=a('<div id="controllgrid_minipanel_info" class="controllgrid_minipanel_info">INFO</div>');F.append(G);F.append(H);F.append(I);F.append(J);F.append(K);G.click(function(){var c=q(b);var d=b.find("#controllgrid_minipanel_info");var e=b.find(".stepselectednow").data("ad");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(e=="1"||e=="2")o(c,"starty_ie8",-1,b,d);else o(c,"endy_ie8",-1,b,d)}else{if(e=="1"||e=="2")o(c,"starty",-1,b,d);else o(c,"endy",-1,b,d)}});H.click(function(){var c=q(b);var d=b.find("#controllgrid_minipanel_info");var e=b.find(".stepselectednow").data("ad");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(e=="1"||e=="2")o(c,"starty:ie8",1,b,d);else o(c,"endy_ie8",1,b,d)}else{if(e=="1"||e=="2")o(c,"starty",1,b,d);else o(c,"endy",1,b,d)}});I.click(function(){var c=q(b);var d=b.find("#controllgrid_minipanel_info");var e=b.find(".stepselectednow").data("ad");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(e=="1")o(c,"startx_ie8",-1,b,d);else if(e=="2")o(c,"endx_ie8",-1,b,d);else if(e=="3")o(c,"zoomxoffset_ie8",-1,b,d);else if(e=="4")o(c,"zoomxendoffset_ie8",-1,b,d)}else{if(e=="1")o(c,"startx",-1,b,d);else if(e=="2")o(c,"endx",-1,b,d);else if(e=="3")o(c,"zoomxoffset",-1,b,d);else if(e=="4")o(c,"zoomxendoffset",-1,b,d)}});J.click(function(){var c=q(b);var d=b.find("#controllgrid_minipanel_info");var e=b.find(".stepselectednow").data("ad");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(e=="1")o(c,"startx_ie8",1,b,d);else if(e=="2")o(c,"endx_ie8",1,b,d);else if(e=="3")o(c,"zoomxoffset_ie8",1,b,d);else if(e=="4")o(c,"zoomxendoffset_ie8",1,b,d)}else{if(e=="1")o(c,"startx",1,b,d);else if(e=="2")o(c,"endx",1,b,d);else if(e=="3")o(c,"zoomxoffset",1,b,d);else if(e=="4")o(c,"zoomxendoffset",1,b,d)}});t.append(F)}function j(c,d){var e=0;c.find("div").each(function(b){var d=a(this);if(d.hasClass("before"))d.appendTo(c.find("#before").parent());if(d.hasClass("after"))d.appendTo(c.find("#after").parent())});c.find("div").each(function(c){var f=a(this);if(f.data("_top")==b)f.data("_top",f.position().top);if(f.data("_left")==b)f.data("_left",f.position().left);if(f.data("_op")==b)f.data("_op",f.css("opacity"));if(f.hasClass("slideup")){f.animate({top:f.data("_top")+20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slideright")){f.animate({left:f.data("_left")-20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slidedown")){f.animate({top:f.data("_top")-20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px"},{duration:300,queue:true});e++}if(f.hasClass("slideleft")){f.animate({left:f.data("_left")+20+"px"},{duration:0,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px"},{duration:300,queue:true});e++}if(f.hasClass("fadeup")){f.animate({top:f.data("_top")+20+"px",opacity:0},{duration:0,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("faderight")){f.animate({left:f.data("_left")-20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fadedown")){f.animate({top:f.data("_top")-20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({top:f.data("_top")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fadeleft")){f.animate({left:f.data("_left")+20+"px",opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({left:f.data("_left")+"px",opacity:f.data("_op")},{duration:300,queue:true});e++}if(f.hasClass("fade")){f.animate({opacity:0},{duration:1,queue:false}).delay(d+(e+1)*50).animate({opacity:f.data("_op")},{duration:300,queue:true});e++}})}function i(c,d,e,f){var g=c/a(window).width();var h=-1*(d/a(window).height());if(g>1)g=1;if(g<-1)g=-1;if(h>1)h=1;if(h<-1)h=-1;var i=f.data("startx");var j=f.data("starty");var k=Math.abs(f.data("endx")-i);var l=f.data("endy")-j;var m=f.data("endskew")-f.data("startskew");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(f.data("endx_ie8")!=b){i=f.data("startx_ie8");k=Math.abs(f.data("endx_ie8")-i)}if(f.data("endy_ie8")!=b){j=f.data("starty_ie8");l=Math.abs(f.data("endy_ie8")-j)}m=0}var n=0;var o=0;if(f.data("zoomxoffset")!=b)n=f.data("zoomxoffset");if(f.data("zoomxendoffset")!=b)o=f.data("zoomxendoffset");if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){if(f.data("zoomxoffset_ie8")!=b)n=f.data("zoomxoffset_ie8");if(f.data("zoomxendoffset_ie8")!=b)o=f.data("zoomxendoffset_ie8")}var p=e.data("zoommax")-e.data("zoommin");p=p*h/100;p=e.data("zoommin")/100+p;var q=f.data("oldWidth")*p;var r=f.data("oldHeight")*p;var s=k*g;var t=l*h;var u=m*g;var v=n*h;var w=Math.abs(n-o);v=v-w*g*h;var x=0;var y=0;x=(q-f.data("oldWidth"))/2;y=(r-f.data("oldHeight"))/2;var z=v+i-s-x;var A=j+t-y;f.find("img").css({width:q+"px",height:r+"px"});f.css({left:z+"px",top:A+"px"});f.find("#selectbox").css({width:q+"px",height:r+"px",left:"0px",top:"0px"});if(f.data("endskew")!=b){f.css({transform:"skew("+(f.data("startskew")+u)+"deg)","-o-transform":"skew("+(f.data("startskew")+u)+"deg)","ms-transform":"skew("+(f.data("startskew")+u)+"deg)","-ms-transform":"skew("+(f.data("startskew")+u)+"deg)","-moz-transform":"skew("+(f.data("startskew")+u)+"deg)","-webkit-transform":"skew("+(f.data("startskew")+u)+"deg)"})}}function h(b,c){if(c.editor=="on"){b.find("#controllgrid").mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);if(b.data("rabbit")=="on"){b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})}})}else{if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){b.mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})})}else{a(window).mousemove(function(c){mouseX=c.pageX;mouseY=c.pageY;b.data("mouseX",mouseX);b.data("mouseY",mouseX);b.data("countdown",0);b.children().each(function(){var d=a(this);i(c.pageX,c.pageY,b,d)})})}}}function g(b,d){b.css({opacity:"0.0",display:"block"});b.find("div").css({opacity:"1.0",display:"block"});b.animate({opacity:"1.0"},{duration:1e3}).delay(1e3);b.children().each(function(){var c=a(this);i(100,100,b,c)});if(a.browser.msie&&a.browser.version>=7&&a.browser.version<9){b.addClass("noFilterClass");b.find("div").addClass("noFilterClass")}else{j(b,500)}b.find("#parallax-main-loader").each(function(){var c=a(this);c.animate({opacity:"0.0"},{duration:1e3,complete:function(){c.remove();h(b,d)}})});b.data("mouseX",0);b.data("mouseY",0);b.data("xset",10);b.data("yset",10);b.data("automatic",d.automatic);if(d.automatic>0&&d.editor!="on"){setInterval(function(){if(b.data("countdown")<d.automatic)b.data("countdown",b.data("countdown")+100);if(b.data("countdown")>=d.automatic){b.data("mouseX",b.data("mouseX")+b.data("xset"));b.data("mouseY",b.data("mouseY")+b.data("yset"));if(b.data("mouseX")>=parseInt(b.css("width"),0))b.data("xset",-20);if(b.data("mouseY")>=parseInt(b.css("height")))b.data("yset",-20);if(b.data("mouseX")<=0)b.data("xset",20);if(b.data("mouseY")<=0)b.data("yset",20);c(b)}},50)}}function f(b){b.children().each(function(){var b=a(this);b.data("oldLeft",b.position().left);b.data("oldTop",b.position().top);b.data("oldWidth",b.find("img:first").width());b.data("oldHeight",b.find("img:first").height())});b.find(".p_button").each(function(){var b=a(this);b.data("button_normal",b.find("img").attr("src"));b.data("button_hover",b.find("img").attr("alt"));b.hover(function(){var b=a(this);var c=b.find("img");c.attr("src",b.data("button_hover"))},function(){var b=a(this);var c=b.find("img");c.attr("src",b.data("button_normal"))})})}function e(b,c){var d=b.data("ba_images");var f=b.data("ba_imagesLoaded");var h=new Image;a(h).css("display","none");a(h).attr("src",d[f]);if(h.complete||h.readyState===4){f++;if(f==d.length){g(b,c)}else{b.data("ba_imagesLoaded",f);e(b,c)}}else{a(h).load(function(){f++;if(f==d.length){g(b,c)}else{b.data("ba_imagesLoaded",f);e(b,c)}})}}function d(b){var c=new Array;var d=0;b.find("img").each(function(b){var e=a(this);c[d]=e.attr("src");d++});b.data("ba_images",c)}function c(b){b.children().each(function(){var c=a(this);i(b.data("mouseX"),b.data("mouseY"),b,c)})}a.fn.extend({fhparallax:function(b){var c={editor:"off",path:"parallax/js/ZeroClipboard.swf",automatic:0,mobile_auto_start:"yes"};b=a.extend({},a.fn.fhparallax.defaults,b);return this.each(function(){var c=a(this);var g=b;if(g.editor=="on")c.data("old_html",c.html());c.data("ba_imagesLoaded",0);c.data("path",g.path);c.find("div").css({opacity:"0.0",display:"block"});f(c);c.append('<div id="parallax-main-loader" class="parallax-main-loader"></div>');c.data("countdown",0);c.data("auto_direction",15);c.data("auto_zoom",15);c.data("lastmouseX",100);c.data("lastmouseY",300);if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){if(g.mobile_auto_start=="yes")g.automatic=1}d(c);e(c,g);c.data("rabbit","on");if(g.editor=="on"){c.appendTo(a("body"));c.css({"z-index":"88999"});k(c,g)}})}});})(jQuery)